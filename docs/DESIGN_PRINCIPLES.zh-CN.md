# DevMind 设计原则

本文档说明 DevMind 项目遵循的核心设计原则。所有应用（Django 应用及 agentcore 模块）都应与这些原则保持一致。

---

## 1. 应用自管理（解耦）

**原则：** 为解耦，每个应用（app）必须**自行管理自身资源**。包括但不限于：

- **数据 / 数据库**  
  各应用拥有自己的模型、迁移与数据。不依赖其他应用的表实现核心行为，也不将自身内部存储暴露给其他应用直接查询。跨应用的数据需求通过稳定接口或事件满足，而非共享表。

- **接口**  
  各应用自行定义并暴露 HTTP（或其他）接口。调用方通过这些接口使用能力，而不是导入该应用的模型或内部模块。影响应用行为的配置由应用自身持有（如自己的配置表或 settings 命名空间），或在调用时显式传入（如通过 UUID 指定渠道配置）。

- **配置**  
  应用级配置（开关、端点、渠道选择等）由应用内部管理，或通过显式约定（如调用参数、该应用占有的环境变量/配置键）传入。不依赖全局的“app_config”或共享配置库；各应用可自行决定如何被配置。

**推论：**

- 优先采用**调用时显式传入配置**（如传入 `channel_config` 或 `channel_uuid`），而非从共享配置库或其它应用的数据库读取。
- 新增能力若需要“用哪个渠道 / 哪个端点”，应由应用自身接口或调用边界上的参数满足，而不是依赖中央配置应用。
- 在移除或替换共享组件（如全局配置应用）时，遵循本原则的应用（自有数据、自有接口、显式配置）不应受影响。

该原则是保持系统解耦、使应用可替换、可独立测试的强制要求。

---

## 2. 使用公共模块时的应用侧配置（示例）

以**云账单模块**使用公共通知能力为例：

- **发送目标**  
  若应用需要指定通知的发送目标（如使用哪条通知渠道），应在**应用侧**增加**明确配置**及**配置页面**，由用户或管理员在应用内选择（例如选择已配置的通知渠道 UUID）。若应用侧未配置发送目标，则**逻辑上不发送**通知，而不是依赖公共模块或全局的默认行为。

- **级别与粒度**  
  告警级别、是否发送、按什么维度区分（例如按云平台、按账号）等，均由**应用侧决定**。例如在云账单管理中，可与每个云平台（provider）或每条告警规则单独关联发送策略，而不是由公共通知模块假定全局规则。

这样，公共模块只提供“按传入的渠道配置发送”的能力，是否发、发给谁、按什么级别发，都由使用方（应用）通过自己的配置与界面管理。
