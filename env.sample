# DevMind Environment Configuration File
# ====================================
# This is a sample environment configuration file for the DevMind project.
# Copy this file to .env and modify the values according to your environment.
# Do not commit the .env file to version control.

# ============================================================================
# ⚠️  IMPORTANT: Boolean Value Convention
# ============================================================================
# All boolean environment variables MUST use lowercase "true" or "false"
#
# ✅ Correct:   DJANGO_DEBUG=true, CORS_ALLOW_ALL_ORIGINS=false
# ❌ Incorrect: DJANGO_DEBUG=True, CORS_ALLOW_ALL_ORIGINS=1, USE_MIRROR=yes
#
# Reason: Ensures consistent behavior across Shell scripts and Python code.
# Only "true" and "false" (lowercase) are accepted as valid boolean values.
# ============================================================================

# ============================================================================
# Django Configuration
# ============================================================================
SECRET_KEY="t=_0ah$18mgana9zi$i$5%(6wbvxc-&*zh4e_j2_@l58l)==0+"
DJANGO_DEBUG=false
ALLOWED_HOSTS=localhost,127.0.0.1
CSRF_TRUSTED_ORIGINS='http://localhost:8000,http://127.0.0.1:8000'
CORS_ALLOW_ALL_ORIGINS=false
CORS_ALLOWED_ORIGINS='http://localhost:3000,http://127.0.0.1:3000'
DJANGO_LOG_LEVEL=INFO

# Default admin user configuration
DJANGO_SUPERUSER_USERNAME=admin
DJANGO_SUPERUSER_EMAIL=admin@example.com
# Password can contain special characters like $, (, ), etc.
# For passwords with special characters, use double quotes to prevent shell interpretation
# Example: DJANGO_SUPERUSER_PASSWORD="MyPass123($$)"
DJANGO_SUPERUSER_PASSWORD=adminpassword

# ============================================================================
# Database Configuration
# ============================================================================
# Option 1: SQLite (Recommended for development)
DB_ENGINE=sqlite
SQLITE_PATH=db.sqlite3

# Option 2: MySQL
# DB_ENGINE=mysql
# MYSQL_USER=username
# MYSQL_PASSWORD=password
# MYSQL_HOST=localhost
# MYSQL_PORT=3306
# MYSQL_DATABASE=db
# MYSQL_ROOT_PASSWORD=rootpassword

# Option 3: PostgreSQL
# Note: PostgreSQL does NOT have a "root" user like MySQL/MariaDB
# - Default superuser is "postgres" (equivalent to MySQL's "root")
# - POSTGRES_USER: Superuser name (default: "postgres")
# - POSTGRES_PASSWORD: Superuser password (REQUIRED - like MYSQL_ROOT_PASSWORD)
# - POSTGRES_HOST: Use "postgresql" in Docker, "localhost" for local
# - POSTGRES_PORT: Default is 5432
# - POSTGRES_DB: Initial database name
# DB_ENGINE=postgresql
# POSTGRES_USER=postgres
# POSTGRES_PASSWORD=your_secure_password
# POSTGRES_HOST=postgresql
# POSTGRES_PORT=5432
# POSTGRES_DB=devmind

# Option 4: Direct DATABASE_URL (overrides DB_ENGINE settings)
# DATABASE_URL=sqlite:///db.sqlite3
# DATABASE_URL=mysql://user:password@host:port/database
# DATABASE_URL=postgresql://user:password@host:port/database

# Celery Configuration
# =====================
# Celery Broker URL for task queue
CELERY_BROKER_URL=redis://redis:6379/0

# Celery Result Backend
CELERY_RESULT_BACKEND=redis://redis:6379/0

# Celery Log Level (DEBUG, INFO, WARNING, ERROR, CRITICAL)
CELERY_LOG_LEVEL=INFO

# Celery Worker Concurrency
# Number of concurrent worker processes/threads
# For I/O-bound tasks (network requests, file operations), higher concurrency is beneficial
# Default: number of CPU cores (auto-detected)
# Recommended: 2-4x CPU count for I/O-bound tasks, 1x CPU count for CPU-bound tasks
# Example: CELERY_CONCURRENCY=8 (for 4-core CPU with I/O-bound tasks)
CELERY_CONCURRENCY=

# Celery Worker Prefetch Multiplier
# Controls how many messages are prefetched by each concurrent worker process
# For long-running tasks (like article collection), set to 1 for fair distribution
# For short-running tasks, higher values (4-10) can improve throughput
# Default: 1 (optimized for long-running I/O-bound tasks)
CELERY_WORKER_PREFETCH_MULTIPLIER=1

# Celery Max Tasks Per Child
# Maximum number of tasks a worker process can execute before being replaced
# Helps mitigate memory leaks in long-running workers
# Default: 1000
CELERY_MAX_TASKS_PER_CHILD=1000

# Celery Max Memory Per Child (in KB)
# Maximum resident memory a worker process can consume before being replaced
# Default: 256000 (256 MB)
CELERY_MAX_MEMORY_PER_CHILD=256000

# ============================================================================
# Cache Configuration
# ============================================================================
CACHE_BACKEND=redis
# CACHE_BACKEND options: redis, memcached, database, locmem
# CACHE_REDIS_URL=redis://redis:6379/1  # Optional: dedicated cache Redis URL
DEVMIND_CACHE_PATH=/var/cache/devmind

# ============================================================================
# Storage Configuration
# ============================================================================
# Note: Article storage configuration has been removed as articlehub is no longer used
# Add your custom storage configuration here if needed

# ============================================================================
# OSS Configuration
# =====================
# OSS bucket name
DEVMIND_OSS_BUCKET_NAME=your-bucket-name

# OSS endpoint
DEVMIND_OSS_ENDPOINT=oss-cn-hangzhou.aliyuncs.com

# OSS access key ID
DEVMIND_OSS_ACCESS_KEY_ID=your-access-key-id

# OSS access key secret
DEVMIND_OSS_ACCESS_KEY_SECRET=your-access-key-secret

# OSS region
DEVMIND_OSS_REGION=cn-hangzhou

# Whether to use virtual host style
DEVMIND_OSS_USE_VIRTUAL_STYLE=False

# Proxy Configuration
# =====================
# HTTP proxy
HTTP_PROXY=http://proxy.example.com:8080

# HTTPS proxy
HTTPS_PROXY=http://proxy.example.com:8080

# ============================================================================
# Accounts & Authentication Configuration
# ============================================================================
# Email backend for notifications
# smtp: production, console: development (prints to terminal)
EMAIL_BACKEND=django.core.mail.backends.smtp.EmailBackend

# SMTP server settings (for sending notification emails)
EMAIL_HOST=smtp.gmail.com
EMAIL_PORT=587
EMAIL_HOST_USER=your-email@example.com
EMAIL_HOST_PASSWORD=your-app-password
EMAIL_USE_TLS=true
EMAIL_USE_SSL=false
DEFAULT_FROM_EMAIL=noreply@devmind.local

# Django Site Configuration (Required for OAuth)
# The domain where your application is hosted
# Development: localhost:8000 or 127.0.0.1:8000
# Production: yourdomain.com or your-ip:port
SITE_DOMAIN=localhost:8000
SITE_NAME=DevMind

# OAuth Protocol Configuration
# Development: 'http' (default), Production: 'https'
# Ensures OAuth callback URLs use the correct protocol
ACCOUNT_DEFAULT_HTTP_PROTOCOL=http

# Registration token expiry time in hours
REGISTRATION_TOKEN_EXPIRY_HOURS=24

# Password reset token validity (in seconds)
# Django default is 3 days (259200 seconds)
# We set it to 1 day (86400 seconds) for better security
PASSWORD_RESET_TIMEOUT=86400

# Frontend URL (for OAuth redirects and email links)
FRONTEND_URL=http://localhost:3000

# Google OAuth Configuration
# Set redirect URI in Google Cloud Console to:
# http://localhost:8000/accounts/google/login/callback/
GOOGLE_OAUTH_CLIENT_ID=your_google_client_id
GOOGLE_OAUTH_CLIENT_SECRET=your_google_client_secret

# ============================================================================
# AI Services Configuration (LLM)
# ============================================================================

# LLM Provider Selection
# Options: 'openai' or 'azure_openai' (default: 'azure_openai')
LLM_PROVIDER=azure_openai

# OpenAI Configuration (when LLM_PROVIDER=openai)
# =====================
# API base URL for OpenAI
# Default: https://api.openai.com/v1/
# For custom endpoints or proxies, change this value
OPENAI_API_BASE=https://api.openai.com/v1/

# API key for authentication
# Security: Never commit this to version control
# How to get: OpenAI Platform → API Keys
OPENAI_API_KEY=your_openai_api_key

# Model name to use
# Examples: 'gpt-4', 'gpt-4-turbo', 'gpt-3.5-turbo', 'gpt-4o', 'gpt-4o-mini', 'gpt-5-nano'
# Default: gpt-5-nano (cost-effective)
OPENAI_MODEL=gpt-5-nano

# Maximum tokens for LLM response
# Range: 1-128000 (varies by model, e.g., gpt-5-nano supports up to 128k)
# Default: 60000 (increased for reasoning models)
# Note: Reasoning models need extra tokens for reasoning + output
OPENAI_MAX_TOKENS=60000

# Temperature for response randomness
# Range: 0.0-2.0
# Default: 0.7 (balanced)
# 0.0: Deterministic, consistent responses
# 2.0: Creative, varied responses
OPENAI_TEMPERATURE=0.7

# Azure OpenAI Configuration (when LLM_PROVIDER=azure_openai)
# =====================
# API base URL from Azure OpenAI resource
# Format: https://{your-resource-name}.openai.azure.com/
AZURE_OPENAI_API_BASE=https://your-openai-endpoint.openai.azure.com/

# API key for authentication
# Security: Never commit this to version control
# How to get: Azure Portal → OpenAI Resource → Keys and Endpoint
AZURE_OPENAI_API_KEY=your-azure-openai-api-key

# Deployment name created in Azure OpenAI Studio
# Example: 'gpt-4', 'gpt-35-turbo', 'gpt-4o', 'gpt-4o-mini', 'gpt-5-nano'
# Default: gpt-5-nano (cost-effective)
AZURE_OPENAI_DEPLOYMENT=gpt-5-nano

# API version for Azure OpenAI service
# Format: YYYY-MM-DD (e.g., '2024-10-01-preview')
AZURE_OPENAI_API_VERSION=2024-10-01-preview

# Maximum tokens for LLM response
# Range: 1-4096 (varies by model)
# Default: 4000
AZURE_OPENAI_MAX_TOKENS=12000

# Temperature for response randomness
# Range: 0.0-2.0 (for most models)
# Default: 0.7 (balanced)
# 0.0: Deterministic, consistent responses
# 2.0: Creative, varied responses
AZURE_OPENAI_TEMPERATURE=0.7

# LLM output language preference
# Examples: 'English', 'Chinese', 'Spanish', 'French'
# Default: English
LLM_OUTPUT_LANGUAGE=English

# ============================================================================
# Nginx Port Configuration
# ============================================================================
# HTTP port for nginx (default: 10080)
# Example: NGINX_HTTP_PORT=80 (for standard HTTP)
NGINX_HTTP_PORT=10080

# HTTPS port for nginx (default: 10443)
# Example: NGINX_HTTPS_PORT=443 (for standard HTTPS)
NGINX_HTTPS_PORT=10443

# Notes:
# 1. For development, use the default SQLite configuration
# 2. For production, uncomment and configure the PostgreSQL or MySQL DATABASE_URL
# 3. PostgreSQL Docker configuration is used in docker-compose.yaml
# 4. PostgreSQL user system:
#    - No "root" user (unlike MySQL/MariaDB)
#    - Default superuser is "postgres" (equivalent to MySQL's "root")
#    - POSTGRES_USER sets the superuser name (default: "postgres")
#    - POSTGRES_PASSWORD is REQUIRED for the superuser (like MYSQL_ROOT_PASSWORD)
# 5. Make sure to use strong passwords and secure keys in production
# 6. Do not commit sensitive information (keys, passwords, etc.) to version control
# 7. It's recommended to use different configuration files for different environments
#    (development, testing, production)
# 8. Port configuration: Set NGINX_HTTP_PORT and NGINX_HTTPS_PORT in .env file
#    to expose nginx on different ports. Defaults are 10080 (HTTP) and 10443 (HTTPS)